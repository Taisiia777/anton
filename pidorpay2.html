<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Valorant Points</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- EmailJS (v3) -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <!-- –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>

  <style>
    :root {
      --bg-color: #f2f2f2;
      --text-color: #333333;
      --header-bg: #111111;
      --header-text: #ffffff;
      --card-bg: #fdacac;
      --card-text: #333333;
      --primary-color: #ff0000;
      --secondary-color: #007bff;
      --accent-color: #0056b3;
      --footer-bg: #111111;
      --footer-text: #ffffff;
    }
    body.dark-theme {
      --bg-color: #2f2f2f;
      --text-color: #cccccc;
      --header-bg: #202020;
      --header-text: #ffffff;
      --card-bg: #3c3c3c;
      --card-text: #dddddd;
      --primary-color: #bb0a0a;
      --secondary-color: #0d6efd;
      --accent-color: #094faf;
      --footer-bg: #202020;
      --footer-text: #cccccc;
    }

    * {
      margin: 0; 
      padding: 0; 
      box-sizing: border-box;
    }
    body {
      font-family: Arial, sans-serif;
      background: var(--bg-color);
      color: var(--text-color);
      line-height: 1.6;
      transition: background 0.3s, color 0.3s;
      overflow-x: hidden;
    }
    a {
      text-decoration: none; 
      color: inherit;
    }
    .container {
      width: 90%; 
      max-width: 1200px; 
      margin: 0 auto;
    }

    /* HEADER */
    .header {
      background: var(--header-bg); 
      color: var(--header-text);
      padding: 10px 0; 
      position: sticky; 
      top: 0; 
      z-index: 999;
      transition: background 0.3s;
    }
    .nav {
      display: flex; 
      justify-content: space-between; 
      align-items: center;
    }
    .nav-menu {
      list-style: none; 
      display: flex; 
      gap: 20px;
    }
    .nav-menu li a {
      color: var(--header-text); 
      font-weight: bold; 
      text-transform: uppercase;
      transition: color 0.3s;
    }
    .nav-menu li a:hover {
      color: var(--primary-color);
    }
    .logo img {
      height: 40px;
    }

    /* THEME SWITCH */
    .theme-switch {
      display: inline-flex; 
      align-items: center; 
      gap: 5px; 
      cursor: pointer;
      user-select: none;
    }
    .theme-switch input { display: none; }
    .slider {
      width: 50px; 
      height: 25px; 
      background: #ccc; 
      border-radius: 25px;
      position: relative; 
      transition: background 0.3s;
    }
    .slider:before {
      content: "";
      position: absolute; 
      top: 2px; 
      left: 2px;
      width: 21px; 
      height: 21px; 
      background: #fff; 
      border-radius: 50%;
      transition: transform 0.3s;
    }
    input:checked + .slider { background: #888; }
    input:checked + .slider:before { transform: translateX(25px); }
    .sun-icon, .moon-icon {
      font-size: 18px; 
      transition: opacity 0.3s;
    }
    input:checked ~ .moon-icon { opacity: 1; }
    input:checked ~ .sun-icon  { opacity: 0.4; }
    input:not(:checked) ~ .moon-icon { opacity: 0.4; }
    input:not(:checked) ~ .sun-icon  { opacity: 1; }

    /* HERO */
    .hero {
      background: url("https://wallpapers.com/images/featured/valorant-305kescxw5dpup7y.jpg") center/cover no-repeat;
      color: #fff; 
      text-align: center; 
      padding: 80px 0;
    }
    .hero h1 {
      font-size: 36px; 
      margin-bottom: 20px;
    }
    .hero p {
      font-size: 18px; 
      margin-bottom: 30px;
    }
    .btn {
      display: inline-block; 
      background: var(--primary-color); 
      color: #fff;
      padding: 15px 30px; 
      text-transform: uppercase;
      border: none; 
      cursor: pointer; 
      font-weight: bold;
      transition: background 0.3s;
    }
    .btn:hover { background: #d00; }

    /* FADE-IN-ON-SCROLL */
    .fade-in-on-scroll {
      opacity: 0; 
      transform: translateY(30px);
      transition: opacity 0.8s ease, transform 0.8s ease;
    }
    .fade-in-on-scroll.visible {
      opacity: 1; 
      transform: translateY(0);
    }

    /* CATALOG */
    .catalog { 
      padding: 40px 0; 
    }
    .catalog h2 {
      text-align: center; 
      margin-bottom: 30px;
    }
    .product-list {
      display: flex; 
      flex-wrap: wrap; 
      gap: 30px; 
      justify-content: center;
    }
    .product-card {
      background: var(--card-bg); 
      color: var(--card-text);
      border-radius: 10px; 
      text-align: center;
      width: 220px; 
      padding: 20px;
      transition: transform 0.3s, box-shadow 0.3s;
      transform-style: preserve-3d;
    }
    .product-card:hover {
      transform: rotate3d(0,1,0,10deg) scale(1.05);
      box-shadow: 0 10px 20px rgba(0,0,0,0.15);
    }
    .product-card img {
      max-width: 100%; 
      height: auto; 
      margin-bottom: 15px;
    }
    .product-card h3 {
      margin-bottom: 10px;
    }
    .price {
      font-weight: bold; 
      margin-bottom: 15px;
    }
    .button-row {
      display: flex; 
      justify-content: center; 
      gap: 10px; 
      margin-top: 10px;
    }
    .details-btn, .buy-btn {
      padding: 8px 15px; 
      border: none; 
      cursor: pointer;
      transition: background 0.3s;
    }
    .details-btn {
      background: #555; 
      color: #fff;
    }
    .details-btn:hover { background: #333; }
    .buy-btn {
      background: var(--secondary-color); 
      color: #fff;
    }
    .buy-btn:hover {
      background: var(--accent-color);
    }

    /* INFO */
    .info {
      padding: 40px 0;
    }
    .info h2 {
      text-align: center; 
      margin-bottom: 20px;
    }
    .info ol {
      list-style: decimal; 
      margin-left: 40px; 
      margin-top: 10px;
    }
    .info ol li {
      margin-bottom: 10px;
    }

    /* SUPPORT */
    .support {
      padding: 40px 0; 
      text-align: center;
    }
    .support h2 {
      margin-bottom: 20px;
    }
    .support-icons {
      display: flex; 
      justify-content: center; 
      gap: 30px; 
      flex-wrap: wrap;
      margin-top: 20px;
    }
    .support-icons a {
      display: flex; 
      align-items: center; 
      gap: 10px;
      color: var(--text-color); 
      text-decoration: none; 
      font-weight: bold;
      border: 1px solid #ccc;
      padding: 10px 15px;
      border-radius: 8px;
      transition: background 0.3s, color 0.3s;
    }
    .support-icons a:hover {
      background: var(--primary-color); 
      color: #fff;
    }
    .support-icons img {
      width: 24px; height: 24px; object-fit: contain;
    }

    /* SECTION-BLOCK (TERMS/PRIVACY) */
    .section-block {
      padding: 40px 0; 
      width: 90%; max-width: 800px; 
      margin: 0 auto;
    }
    .section-block h1 {
      margin-bottom: 20px; font-size: 24px;
    }

    /* FOOTER */
    .footer {
      background: var(--footer-bg); 
      color: var(--footer-text);
      text-align: center; 
      padding: 20px 0; 
      margin-top: 40px;
      transition: background 0.3s;
    }
    .footer a {
      color: var(--footer-text);
      text-decoration: underline;
    }
    .disclaimer {
      margin-top: 10px; 
      font-size: 0.9em; 
      color: #bbb;
    }

    /* MODAL (–û–ü–õ–ê–¢–ê) */
    .modal-overlay {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.6); display: none; align-items: center;
      justify-content: center; z-index: 1000;
    }
    .modal-overlay.show {
      display: flex;
    }
    .modal {
      background: var(--bg-color); color: var(--text-color);
      padding: 20px; border-radius: 8px; 
      max-width: 400px; width: 100%; position: relative;
      transition: background 0.3s, color 0.3s;
    }
    .close-btn {
      position: absolute; top: 10px; right: 10px;
      background: transparent; border: none; font-size: 22px;
      cursor: pointer; color: #999; transition: color 0.3s;
    }
    .close-btn:hover { color: var(--primary-color); }
    .modal h3 { margin-bottom: 15px; }
    label {
      display: block; margin: 10px 0 5px; font-weight: bold;
    }
    .input-text {
      width: 100%; padding: 8px; margin-bottom: 10px;
      background: var(--card-bg); color: var(--text-color);
      border: 1px solid #ccc; transition: background 0.3s, color 0.3s;
    }
    .generate-btn, .check-btn {
      background: var(--primary-color); color: #fff; padding: 10px; border: none;
      cursor: pointer; transition: background 0.3s; display: inline-block;
      margin-right: 10px; margin-top: 5px;
    }
    .generate-btn:hover, .check-btn:hover {
      background: #d00;
    }
    #statusMsg {
      margin-top: 10px; font-weight: bold; white-space: pre-wrap;
    }
    .qr-section {
      margin-top: 15px; text-align: center; display: none;
    }
    .qr-section img {
      margin: 10px 0; max-width: 200px;
    }
    .link-result {
      word-break: break-all; font-size: 14px; color: var(--secondary-color);
    }
    .link-result a {
      color: var(--secondary-color); text-decoration: underline;
    }

    /* MODAL –î–ï–¢–ê–õ–ï–ô (–û–¢–ó–´–í–´) */
    .product-details-overlay {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.6); display: none; align-items: center;
      justify-content: center; z-index: 1200;
    }
    .product-details-overlay.show {
      display: flex;
    }
    .product-details-modal {
      background: var(--bg-color); color: var(--text-color);
      padding: 20px; border-radius: 8px; 
      max-width: 600px; width: 90%; position: relative;
    }
    .details-close-btn {
      position: absolute; top: 10px; right: 10px;
      background: transparent; border: none; font-size: 22px;
      cursor: pointer; color: #999; transition: color 0.3s;
    }
    .details-close-btn:hover { color: var(--primary-color); }
    .product-details-modal h2 { margin-bottom: 10px; }
    #detailsDesc { margin-bottom: 15px; }
    .review-list {
      margin-top: 10px; margin-bottom: 20px; max-height: 200px; overflow: auto;
      border: 1px solid #ccc; padding: 10px; border-radius: 8px; 
      background: var(--card-bg);
    }
    .review-item {
      margin-bottom: 10px; border-bottom: 1px solid #ddd; padding-bottom: 6px;
    }
    .review-stars { color: #ffcc00; }
    .no-reviews {
      font-style: italic; color: #999;
    }
    .review-btn {
      background: #555; color: #fff; border: none; padding: 10px 20px;
      margin-bottom: 10px; display: inline-block; transition: background 0.3s;
    }
    .review-btn:hover { background: #333; }
    .review-form {
      margin-top: 10px; margin-bottom: 10px; display: none;
      border: 1px solid #ccc; padding: 10px; border-radius: 8px;
      background: var(--card-bg);
    }
    .review-form label { margin: 8px 0 5px; display: block; font-weight: normal; }
    .star-rating {
      font-size: 20px; cursor: pointer; color: #999;
    }
    .star-rating .star:hover,
    .star-rating .star.selected {
      color: #ffcc00;
    }
    #reviewText {
      width: 100%; margin-bottom: 10px;
    }
    .product-details-modal .buy-btn {
      margin-top: 10px; background: var(--secondary-color);
      color: #fff; border: none; padding: 10px 20px; cursor: pointer;
      transition: background 0.3s;
    }
    .product-details-modal .buy-btn:hover {
      background: var(--accent-color);
    }

    /* SCROLL-TOP */
    .scroll-top-btn {
      position: fixed; bottom: 20px; right: 20px;
      background: var(--primary-color); color: #fff;
      border: none; padding: 10px; border-radius: 50%;
      font-size: 20px; cursor: pointer; display: none;
      z-index: 2000; transition: background 0.3s;
    }
    .scroll-top-btn:hover { background: #d00; }

    /* –ê–¥–∞–ø—Ç–∏–≤ */
    @media (max-width:768px) {
      .hero h1 { font-size:28px; }
      .hero p  { font-size:16px; }
      .btn { padding:12px24px; font-size:14px; }
      .nav-menu { flex-wrap:wrap; gap:10px; }
      .product-list { gap:20px; }
      .product-card { width:180px; padding:15px; }
    }
    @media (max-width:480px) {
      .hero { padding:60px0; }
      .hero h1 { font-size:24px; }
      .hero p  { font-size:14px; }
      .btn     { padding:10px20px; font-size:12px; }
      .nav { flex-wrap:wrap; gap:10px; }
      .nav-menu { flex-direction:column; align-items:center; gap:10px; }
      .product-list { flex-direction:column; align-items:center; }
      .product-card { width:100%; max-width:260px; margin:0auto; }
    }
  </style>
</head>
<body>

  <!-- ======= HEADER ======= -->
  <header class="header">
    <div class="container nav">
      <div style="display:flex; align-items:center; gap:20px;">
        <label class="theme-switch">
          <input type="checkbox" id="themeToggleInput">
          <span class="slider"></span>
          <span class="sun-icon">‚òÄ</span>
          <span class="moon-icon">üåô</span>
        </label>
        <div class="logo">
          <a href="#hero"><img src="https://i.imgur.com/x9emlml.png" alt="Valorant Points"></a>
        </div>
      </div>
      <ul class="nav-menu">
        <li><a href="#hero" class="active">–ì–ª–∞–≤–Ω–∞—è</a></li>
        <li><a href="#support">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</a></li>
        <li><a href="offer">–°–æ–≥–ª–∞—à–µ–Ω–∏–µ</a></li>
        <li><a href="policy">–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</a></li>
      </ul>
    </div>
  </header>

  <!-- ======= HERO ======= -->
  <section class="hero fade-in-on-scroll" id="hero">
    <div class="container">
      <h1>Valorant Points</h1>
      <p>–ü–æ–∫—É–ø–∞–π—Ç–µ –ø–æ–∏–Ω—Ç—ã –±—ã—Å—Ç—Ä–æ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ, –±–µ–∑ –ø–µ—Ä–µ–ø–ª–∞—Ç</p>
      <a href="#catalog" class="btn">–°–º–æ—Ç—Ä–µ—Ç—å –∫–∞—Ç–∞–ª–æ–≥</a>
    </div>
  </section>

  <!-- ======= CATALOG (30+ —Ç–æ–≤–∞—Ä–æ–≤) ======= -->
  <section class="catalog fade-in-on-scroll" id="catalog">
    <div class="container">
      <h2>–ù–∞—à –∫–∞—Ç–∞–ª–æ–≥ –∫–æ–¥–æ–≤</h2>
      <div class="product-list">

        <!-- 1) 300 VP -->
        <div class="product-card">
          <img src="https://i.imgur.com/eSTcVmD.png" alt="300 VP">
          <h3>300 Valorant Points</h3>
          <p>–ö–æ–¥ –Ω–∞ 300 VP</p>
          <div class="price">339 —Ä—É–±.</div>
          <div class="button-row">
            <button class="details-btn" onclick="openDetailsModal('300 Valorant Points','300VP',339)">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
            <button class="buy-btn" onclick="openPaymentModal('300 Valorant Points',339)">–ö—É–ø–∏—Ç—å</button>
          </div>
        </div>

        <!-- 2) 500 VP -->
        <div class="product-card">
          <img src="https://i.imgur.com/eSTcVmD.png" alt="500 VP">
          <h3>500 Valorant Points</h3>
          <p>–ö–æ–¥ –Ω–∞ 500 VP</p>
          <div class="price">459 —Ä—É–±.</div>
          <div class="button-row">
            <button class="details-btn" onclick="openDetailsModal('500 Valorant Points','500VP',459)">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
            <button class="buy-btn" onclick="openPaymentModal('500 Valorant Points',459)">–ö—É–ø–∏—Ç—å</button>
          </div>
        </div>

        <!-- 3) 600 VP -->
        <div class="product-card">
          <img src="https://i.imgur.com/eSTcVmD.png" alt="600 VP">
          <h3>600 Valorant Points</h3>
          <p>–ö–æ–¥ –Ω–∞ 600 VP</p>
          <div class="price">549 —Ä—É–±.</div>
          <div class="button-row">
            <button class="details-btn" onclick="openDetailsModal('600 Valorant Points','600VP',549)">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
            <button class="buy-btn" onclick="openPaymentModal('600 Valorant Points',549)">–ö—É–ø–∏—Ç—å</button>
          </div>
        </div>

        <!-- 4) 700 VP -->
        <div class="product-card">
          <img src="https://i.imgur.com/eSTcVmD.png" alt="700 VP">
          <h3>700 Valorant Points</h3>
          <p>–ö–æ–¥ –Ω–∞ 700 VP</p>
          <div class="price">629 —Ä—É–±.</div>
          <div class="button-row">
            <button class="details-btn" onclick="openDetailsModal('700 Valorant Points','700VP',629)">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
            <button class="buy-btn" onclick="openPaymentModal('700 Valorant Points',629)">–ö—É–ø–∏—Ç—å</button>
          </div>
        </div>

        <!-- (–∏ —Ç.–¥. –¥–æ 30+ —Ç–æ–≤–∞—Ä–æ–≤) -->
        <!-- –ú–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å —Ç–µ –∂–µ —Ç–æ–≤–∞—Ä—ã, —á—Ç–æ –±—ã–ª–∏ —Ä–∞–Ω—å—à–µ, –∏–ª–∏ –ª—é–±—ã–µ –¥—Ä—É–≥–∏–µ (–¥–∞–ª–µ–µ –ø—Ä–∏–º–µ—Ä) -->

        <!-- 5) 1000 VP -->
        <div class="product-card">
          <img src="https://i.imgur.com/eSTcVmD.png" alt="1000 VP">
          <h3>1000 Valorant Points</h3>
          <p>–ö–æ–¥ –Ω–∞ 1000 VP</p>
          <div class="price">859 —Ä—É–±.</div>
          <div class="button-row">
            <button class="details-btn" onclick="openDetailsModal('1000 Valorant Points','1000VP',859)">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
            <button class="buy-btn" onclick="openPaymentModal('1000 Valorant Points',859)">–ö—É–ø–∏—Ç—å</button>
          </div>
        </div>

        <!-- 6) 1250 VP -->
        <div class="product-card">
          <img src="https://i.imgur.com/eSTcVmD.png" alt="1250 VP">
          <h3>1250 Valorant Points</h3>
          <p>–ö–æ–¥ –Ω–∞ 1250 VP</p>
          <div class="price">1049 —Ä—É–±.</div>
          <div class="button-row">
            <button class="details-btn" onclick="openDetailsModal('1250 Valorant Points','1250VP',999)">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
            <button class="buy-btn" onclick="openPaymentModal('1250 Valorant Points',999)">–ö—É–ø–∏—Ç—å</button>
          </div>
        </div>

        <!-- 7) 2000 VP -->
        <div class="product-card">
          <img src="https://i.imgur.com/eSTcVmD.png" alt="2000 VP">
          <h3>2000 Valorant Points</h3>
          <p>–ö–æ–¥ –Ω–∞ 2000 VP</p>
          <div class="price">1390 —Ä—É–±.</div>
          <div class="button-row">
            <button class="details-btn" onclick="openDetailsModal('2000 Valorant Points','2000VP',1799)">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
            <button class="buy-btn" onclick="openPaymentModal('2000 Valorant Points',1799)">–ö—É–ø–∏—Ç—å</button>
          </div>
        </div>

        <!-- 8) 3000 VP -->
        <div class="product-card">
          <img src="https://i.imgur.com/eSTcVmD.png" alt="3000 VP">
          <h3>3000 Valorant Points</h3>
          <p>–ö–æ–¥ –Ω–∞ 3000 VP</p>
          <div class="price">2849 —Ä—É–±.</div>
          <div class="button-row">
            <button class="details-btn" onclick="openDetailsModal('3000 Valorant Points','3000VP',2499)">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
            <button class="buy-btn" onclick="openPaymentModal('3000 Valorant Points',2499)">–ö—É–ø–∏—Ç—å</button>
          </div>
        </div>

        <!-- 9) 5000 VP -->
        <div class="product-card">
          <img src="https://i.imgur.com/eSTcVmD.png" alt="5000 VP">
          <h3>5000 Valorant Points</h3>
          <p>–ö–æ–¥ –Ω–∞ 5000 VP</p>
          <div class="price">5200 —Ä—É–±.</div>
          <div class="button-row">
            <button class="details-btn" onclick="openDetailsModal('5000 Valorant Points','5000VP',5200)">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
            <button class="buy-btn" onclick="openPaymentModal('5000 Valorant Points',5200)">–ö—É–ø–∏—Ç—å</button>
          </div>
        </div>

        <!-- 10) 7500 VP -->
        <div class="product-card">
          <img src="https://i.imgur.com/eSTcVmD.png" alt="7500 VP">
          <h3>7500 Valorant Points</h3>
          <p>–ö–æ–¥ –Ω–∞ 7500 VP</p>
          <div class="price">6890 —Ä—É–±.</div>
          <div class="button-row">
            <button class="details-btn" onclick="openDetailsModal('7500 Valorant Points','7500VP',6890)">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
            <button class="buy-btn" onclick="openPaymentModal('7500 Valorant Points',6890)">–ö—É–ø–∏—Ç—å</button>
          </div>
        </div>

        <!-- 10) 11500 VP -->
        <div class="product-card">
          <img src="https://i.imgur.com/eSTcVmD.png" alt="11500 VP">
          <h3>11500 Valorant Points</h3>
          <p>–ö–æ–¥ –Ω–∞ 11500 VP</p>
          <div class="price">13990 —Ä—É–±.</div>
          <div class="button-row">
            <button class="details-btn" onclick="openDetailsModal('11500 Valorant Points','11500',13990)">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
            <button class="buy-btn" onclick="openPaymentModal('11500 Valorant Points',13990)">–ö—É–ø–∏—Ç—å</button>
          </div>
        </div>

        <!-- (–î–æ–±–∞–≤—å—Ç–µ –¥–æ 30+ –∫–∞—Ä—Ç, –∫–∞–∫ –Ω—É–∂–Ω–æ) -->

      </div>
    </div>
  </section>

  <!-- INFO -->
  <section class="info fade-in-on-scroll" id="info">
    <div class="container">
      <h2>–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?</h2>
      <ol>
        <li>–í—ã–±–∏—Ä–∞–µ—Ç–µ –Ω—É–∂–Ω—ã–π –Ω–æ–º–∏–Ω–∞–ª –∫–æ–¥–∞ –Ω–∞ —Å–∞–π—Ç–µ, –Ω–∞–∂–∏–º–∞–µ—Ç–µ ¬´–ö—É–ø–∏—Ç—å¬ª –∏ –≤—ã–±–∏—Ä–∞–µ—Ç–µ —É–¥–æ–±–Ω—ã–π –º–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç—ã (—Å–µ–π—á–∞—Å Tinkoff).</li>
        <li>–£–∫–∞–∑—ã–≤–∞–µ—Ç–µ e-mail, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–≤–∞—Ä –∏ —á–µ–∫ –æ–ø–ª–∞—Ç—ã.</li>
        <li>–û–ø–ª–∞—á–∏–≤–∞–µ—Ç–µ, –∑–∞—Ç–µ–º –∂–º—ë—Ç–µ ¬´–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–ø–ª–∞—Ç—É¬ª (–∏–ª–∏ –∂–¥—ë—Ç–µ –∞–≤—Ç–æ-–ø—Ä–æ–≤–µ—Ä–∫—É).</li>
        <li>–ï—Å–ª–∏ –ø–ª–∞—Ç—ë–∂ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω, –Ω–∞ e-mail –ø—Ä–∏–¥—ë—Ç –∫–æ–¥ –∏ —á–µ–∫ –ø–æ–∫—É–ø–∫–∏.</li>
        <li>–ï—Å–ª–∏ –∂–µ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ª—é–±—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —Ç–æ–≤–∞—Ä–æ–º/–æ–ø–ª–∞—Ç–æ–π/—Å–∞–π—Ç–æ–º ‚Äî –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –≤ –Ω–∞—à—É –ø–æ–¥–¥–µ—Ä–∂–∫—É!</li>
        <li>–¢–∞–∫–∂–µ –≤—ã –º–æ–∂–µ—Ç–µ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω—ã–º FAQ –Ω–∞ –Ω–∞—à–µ–º —Å–∞–π—Ç–µ <a href="https://valorant.su/faq" target="_blank">https://valorant.su/faq</a></li>
      </ol>
    </div>
  </section>

  <!-- SUPPORT -->
  <section class="support fade-in-on-scroll" id="support">
    <div class="container">
      <h2>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã</h2>
      <p>–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã, —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏:</p>
      <div class="support-icons">
        <a href="https://t.me/Beast_brawl" target="_blank">
          <img src="https://i.imgur.com/x45z8on.png" alt="Telegram">
          Telegram
        </a>
        <a href="mailto:info@valorant.su">
          <img src="https://i.imgur.com/vsRyFJe.png" alt="Email">
          –ü–æ—á—Ç–∞
        </a>
        <a href="https://t.me/Beast_brawl" target="_blank">
          <img src="https://i.imgur.com/x45z8on.png" alt="Manager">
          –ú–µ–Ω–µ–¥–∂–µ—Ä
        </a>
      </div>
      <p style="margin-top:20px;">–ú—ã –æ—Ç–≤–µ—Ç–∏–º –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤. –°–ø–∞—Å–∏–±–æ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ!</p>
    </div>
  </section>

  <!-- TERMS -->
  <section class="section-block fade-in-on-scroll" id="terms">
    <h1>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ (–û—Ñ–µ—Ä—Ç–∞)</h1>
    <p>–ù–∞—Å—Ç–æ—è—â–µ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ —è–≤–ª—è–µ—Ç—Å—è –ø—É–±–ª–∏—á–Ω–æ–π –æ—Ñ–µ—Ä—Ç–æ–π.</p>
    <p>–ò—Å–ø–æ–ª—å–∑—É—è —Å–∞–π—Ç (valorant.su), –≤—ã –ø—Ä–∏–Ω–∏–º–∞–µ—Ç–µ —ç—Ç–∏ —É—Å–ª–æ–≤–∏—è.</p>
    <p><em>–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: 31.01.2025 –û–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è –º–æ–∂–Ω–æ –Ω–∞ –Ω–∞—à–µ–º —Å–∞–π—Ç–µ - <a href="https://valorant.su/offer" target="_blank">https://valorant.su/offer</a></em></p>
  </section>

  <!-- PRIVACY -->
  <section class="section-block fade-in-on-scroll" id="privacy">
    <h1>–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</h1>
    <p>–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ—Ä—è–¥–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–§–ó-152) –Ω–∞ —Å–∞–π—Ç–µ valorant.su</p>
    <p><em>–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: 31.01.2025 –ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –û–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è –º–æ–∂–Ω–æ –Ω–∞ –Ω–∞—à–µ–º —Å–∞–π—Ç–µ - <a href="https://valorant.su/policy" target="_blank">https://valorant.su/policy</a></em></p>
  </section>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="container">
      <p>¬© 2025 Valorant Points. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
      <p>
        <strong>–ò–ü –§–∏–ª–∏–º–æ–Ω–æ–≤ –ú–∏—Ö–∞–∏–ª –ù–∏–∫–æ–ª–∞–µ–≤–∏—á</strong>, –ò–ù–ù: 150204790739 |
        E-mail: info@valorant.su
      </p>
      <p>
        <a href="offer">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ</a> |
        <a href="policy">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
      </p>
      <p class="disclaimer">
        *VALORANT ‚Äî —Ç–æ—Ä–≥–æ–≤–∞—è –º–∞—Ä–∫–∞ Riot Games. –ù–µ —è–≤–ª—è–µ—Ç—Å—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–æ–º Riot Games.
      </p>
    </div>
  </footer>

  <!-- MODAL (–û–ø–ª–∞—Ç–∞) -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal">
      <button class="close-btn" onclick="closeModal()">&times;</button>
      <h3 id="modalTitle">–ü–æ–∫—É–ø–∫–∞</h3>

      <label for="emailInput">–í–∞—à e-mail:</label>
      <input type="email" id="emailInput" class="input-text" placeholder="example@mail.ru">

      <button class="generate-btn" onclick="generateTinkoffPayment()">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–ø–ª–∞—Ç—É</button>
      <button class="check-btn" onclick="checkTinkoffPayment()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–ø–ª–∞—Ç—É</button>

      <div class="qr-section" id="qrSection">
        <p><strong>QR-–∫–æ–¥ –¥–ª—è –æ–ø–ª–∞—Ç—ã:</strong></p>
        <img id="qrCodeImg" src="" alt="QR Code">
        <p class="link-result" id="paymentLink"></p>
      </div>

      <div class="autocheck-timer" id="autoCheckTimer"></div>
      <p id="statusMsg"></p>
    </div>
  </div>

  <!-- MODAL (–ü–æ–¥—Ä–æ–±–Ω–µ–µ + –æ—Ç–∑—ã–≤—ã) -->
  <div class="product-details-overlay" id="productDetailsOverlay">
    <div class="product-details-modal">
      <button class="details-close-btn" onclick="closeDetailsModal()">&times;</button>
      <h2 id="detailsTitle"></h2>
      <p id="detailsDesc"></p>

      <h3>–û—Ç–∑—ã–≤—ã</h3>
      <div class="review-list" id="reviewList"></div>
      <button class="review-btn" id="leaveReviewBtn" onclick="toggleReviewForm()">–û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</button>

      <div class="review-form" id="reviewForm">
        <label>–í–∞—à–∞ –æ—Ü–µ–Ω–∫–∞ (1‚Äì5):</label>
        <div class="star-rating" id="starRating">
          <span class="star" data-star="1">‚òÖ</span>
          <span class="star" data-star="2">‚òÖ</span>
          <span class="star" data-star="3">‚òÖ</span>
          <span class="star" data-star="4">‚òÖ</span>
          <span class="star" data-star="5">‚òÖ</span>
        </div>
        <label for="reviewText">–í–∞—à –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</label>
        <textarea id="reviewText" rows="3"></textarea>
        <button onclick="submitReview()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>

      <button class="buy-btn" id="detailsBuyBtn">–ö—É–ø–∏—Ç—å —Å–µ–π—á–∞—Å</button>
    </div>
  </div>

  <!-- SCROLL TOP -->
  <button class="scroll-top-btn" id="scrollTopBtn">‚Üë</button>

  <script>
    /*************************************************************
     * EmailJS INIT
     *************************************************************/
    emailjs.init("Pqx7K7cWz3fcw5NOZ"); // <-- –ø–æ–¥—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à –∫–ª—é—á
    const EMAILJS_SERVICE_ID = "service_4rqximk";
    const EMAILJS_TEMPLATE_ID= "template_m5d1tk4";

    /*************************************************************
     * Global Vars
     *************************************************************/
    let currentItemName   = "";
    let currentItemPrice  = 0;
    let tinkoffPaymentId  = null;
    let userEmail         = null;
    let paymentAlreadyDone= false;

    let autoCheckTimerID  = null;
    let autoCheckCounter  = 30;

    /*************************************************************
     * Dark/Light toggle
     *************************************************************/
    const themeToggleInput = document.getElementById('themeToggleInput');
    themeToggleInput.addEventListener('change', ()=>{
      document.body.classList.toggle('dark-theme', themeToggleInput.checked);
    });

    /*************************************************************
     * Modal OPEN/CLOSE
     *************************************************************/
    function openPaymentModal(itemName, price){
      currentItemName  = itemName;
      currentItemPrice = price;
      tinkoffPaymentId = null;
      paymentAlreadyDone= false;
      clearAutoCheck();

      document.getElementById('modalTitle').textContent = `–ü–æ–∫—É–ø–∫–∞: ${itemName} (${price} —Ä—É–±.)`;
      document.getElementById('emailInput').value= "";
      document.getElementById('qrCodeImg').src= "";
      document.getElementById('paymentLink').innerHTML= "";
      document.getElementById('qrSection').style.display= "none";
      document.getElementById('statusMsg').textContent= "";
      document.getElementById('autoCheckTimer').textContent= "";

      document.getElementById('modalOverlay').classList.add('show');
    }
    function closeModal(){
      document.getElementById('modalOverlay').classList.remove('show');
      clearAutoCheck();
    }
    document.getElementById('modalOverlay').addEventListener('click', e=>{
      if(e.target.id==='modalOverlay') closeModal();
    });

    /*************************************************************
     * Generate Tinkoff Payment
     *************************************************************/
    async function generateTinkoffPayment(){
      userEmail = document.getElementById('emailInput').value.trim();
      if(!userEmail){
        alert("–í–≤–µ–¥–∏—Ç–µ e-mail!");
        return;
      }
      let body = {
        amount:   currentItemPrice,
        itemName: currentItemName,
        email:    userEmail
      };
      try {
        const resp= await fetch("/api/tpay/create", {
          method:"POST",
          headers:{"Content-Type":"application/json"},
          body: JSON.stringify(body)
        });
        if(resp.status!==200){
          document.getElementById('statusMsg').textContent=
            `–û—à–∏–±–∫–∞ init Tinkoff: HTTP ${resp.status}`;
          return;
        }
        let json= await resp.json();
        console.log("Tinkoff /Init =>", json);
        if(!json.Success){
          document.getElementById('statusMsg').textContent=
            "–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ–ø–ª–∞—Ç—ã: " + (json.Message||"") + 
            "\n(–í–æ–∑–º–æ–∂–Ω–æ, –Ω–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)";
          return;
        }
        tinkoffPaymentId= json.PaymentId;
        localStorage.setItem("tinkoff_paymentId", tinkoffPaymentId);
        localStorage.setItem("tinkoff_itemName",  currentItemName);
        localStorage.setItem("tinkoff_email",     userEmail);

        let payURL= json.PaymentURL||"";
        if(payURL){
          document.getElementById('statusMsg').textContent=
            "–°—á—ë—Ç —Å–æ–∑–¥–∞–Ω, –æ–ø–ª–∞—Ç–∏—Ç–µ. –ü–æ—Ç–æ–º –Ω–∞–∂–º–∏—Ç–µ ¬´–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–ø–ª–∞—Ç—É¬ª.";
          window.open(payURL, "_blank");
        }
        startAutoCheck();
      } catch(e){
        console.error(e);
        document.getElementById('statusMsg').textContent=
          "–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ /api/tpay/create => " + e;
      }
    }

    /*************************************************************
     * Autocheck
     *************************************************************/
    function startAutoCheck(){
      clearAutoCheck();
      autoCheckCounter=30;
      updateTimerText();
      autoCheckTimerID = setInterval(()=>{
        autoCheckCounter--;
        if(autoCheckCounter<=0){
          autoCheckCounter=30;
          checkTinkoffPayment(false);
        }
        updateTimerText();
      },1000);
    }
    function updateTimerText(){
      document.getElementById('autoCheckTimer').textContent=
        `–ê–≤—Ç–æ-–ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ ${autoCheckCounter} c.`;
    }
    function clearAutoCheck(){
      if(autoCheckTimerID){
        clearInterval(autoCheckTimerID);
        autoCheckTimerID=null;
      }
    }

    /*************************************************************
     * Check Tinkoff Payment
     *************************************************************/
    async function checkTinkoffPayment(showAlertIfNoOrder=true){
      if(paymentAlreadyDone){
        document.getElementById('statusMsg').textContent=
          "–û–ø–ª–∞—Ç–∞ —É–∂–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞, –∫–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!";
        return;
      }
      if(!tinkoffPaymentId){
        let pid= localStorage.getItem("tinkoff_paymentId");
        if(!pid){
          if(showAlertIfNoOrder) alert("–°–Ω–∞—á–∞–ª–∞ ¬´–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–ø–ª–∞—Ç—É¬ª!");
          return;
        }
        tinkoffPaymentId= pid;
        userEmail       = localStorage.getItem("tinkoff_email");
        currentItemName = localStorage.getItem("tinkoff_itemName");
      }
      try {
        let body={ paymentId: tinkoffPaymentId };
        let resp= await fetch("/api/tpay/status", {
          method:"POST",
          headers:{"Content-Type":"application/json"},
          body: JSON.stringify(body)
        });
        if(resp.status!==200){
          document.getElementById('statusMsg').textContent=
            `–û—à–∏–±–∫–∞ /api/tpay/status: HTTP ${resp.status}`;
          return;
        }
        let json= await resp.json();
        console.log("Tinkoff /GetState =>", json);

        if(!json.Success){
          document.getElementById('statusMsg').textContent=
            "–û—à–∏–±–∫–∞ getState: " + (json.Message||"");
          return;
        }
        let st= json.Status||"";
        if(st==="CONFIRMED"){
          paymentAlreadyDone= true;
          clearAutoCheck();
          document.getElementById('statusMsg').innerHTML=
            `–û–ø–ª–∞—Ç–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞! –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–æ–¥...\n<button onclick="leaveReviewNow()" style="margin-top:6px; background:#555; color:#fff; border:none; padding:8px15px; cursor:pointer;">–û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</button>`;
          sendEmailWithCode(userEmail, currentItemName);

        } else if(st==="NEW" || st==="AUTHORIZED"){
          document.getElementById('statusMsg').textContent=
            `–°—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞: ${st}, –µ—â—ë –Ω–µ –∑–∞–≤–µ—Ä—à—ë–Ω.`;
        } else if(st==="REJECTED" || st==="CANCELED" || st==="REFUNDED"){
          document.getElementById('statusMsg').textContent=
            `–ü–ª–∞—Ç—ë–∂: ${st}. –û—Ç–∫–ª–æ–Ω—ë–Ω/–æ—Ç–º–µ–Ω—ë–Ω/–≤–æ–∑–≤—Ä–∞—â—ë–Ω.`;
          clearAutoCheck();
        } else {
          document.getElementById('statusMsg').textContent=
            `–°—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞: ${st}.`;
        }

      } catch(e){
        console.error(e);
        document.getElementById('statusMsg').textContent=
          "–û—à–∏–±–∫–∞ getState => " + e;
      }
    }

    function leaveReviewNow(){
      openDetailsModal(currentItemName, "someID", currentItemPrice);
    }

    /*************************************************************
     * Send code via EmailJS
     *************************************************************/
    function generateValorantCode(){
      const chars="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
      let code="VP-";
      for(let i=0; i<10; i++){
        code += chars[Math.floor(Math.random()*chars.length)];
      }
      return code;
    }
    async function sendEmailWithCode(toEmail, itemName){
      let code= generateValorantCode();
      let params={
        to_email: toEmail,
        code: code,
        itemName: itemName,
        username: "–£–≤–∞–∂–∞–µ–º—ã–π –∫–ª–∏–µ–Ω—Ç"
      };
      try{
        let r= await emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, params);
        document.getElementById('statusMsg').textContent=
          `–ö–æ–¥ (${code}) –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ ${toEmail}. –°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–∫—É–ø–∫—É!`;
        recordPurchase(itemName);
        launchConfetti();
      } catch(e){
        console.error(e);
        document.getElementById('statusMsg').textContent=
          "–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –ø–∏—Å—å–º–∞ (EmailJS).";
      }
    }
    function recordPurchase(itemName){
      localStorage.setItem("purchased_"+itemName, "true");
    }
    function launchConfetti(){
      const end= Date.now() + 3000;
      (function frame(){
        confetti({ particleCount: 25, angle:60,  spread:55, origin:{x:0} });
        confetti({ particleCount: 25, angle:120, spread:55, origin:{x:1} });
        if(Date.now()<end) requestAnimationFrame(frame);
      })();
    }

    /*************************************************************
     * –û—Ç–∑—ã–≤—ã (–∑–∞–≥–ª—É—à–∫–∏)
     *************************************************************/
    let currentDetailsItemID= null;
    let starSelected= 0;

    async function fetchReviewsFromServer(itemID){
      // –∑–∞–≥–ª—É—à–∫–∞
      return [];
    }
    async function postReviewToServer(itemID, star, text, email){
      // –∑–∞–≥–ª—É—à–∫–∞
      return { success:true };
    }

    async function openDetailsModal(itemName, itemID, price){
      currentDetailsItemID= itemID;
      document.getElementById('detailsTitle').textContent= itemName;
      document.getElementById('detailsDesc').textContent=
        `–ö–æ–¥ –¥–ª—è –∏–≥—Ä—ã VALORANT: ¬´${itemName}¬ª, —Ü–µ–Ω–∞: ${price} —Ä—É–±.`;

      let arr= await fetchReviewsFromServer(itemID);
      renderReviews(arr);

      let purchasedKey= "purchased_"+itemName;
      if(localStorage.getItem(purchasedKey)){
        document.getElementById('leaveReviewBtn').style.display= "inline-block";
      } else {
        document.getElementById('leaveReviewBtn').style.display= "none";
      }
      document.getElementById('reviewForm').style.display="none";

      document.getElementById('detailsBuyBtn').onclick=()=>{
        openPaymentModal(itemName, price);
      };

      document.getElementById('productDetailsOverlay').classList.add('show');
    }
    function closeDetailsModal(){
      document.getElementById('productDetailsOverlay').classList.remove('show');
      currentDetailsItemID= null;
    }
    document.getElementById('productDetailsOverlay').addEventListener('click',(e)=>{
      if(e.target.id==='productDetailsOverlay') closeDetailsModal();
    });
    function renderReviews(arrayOfReviews){
      let reviewList= document.getElementById('reviewList');
      if(!arrayOfReviews||arrayOfReviews.length===0){
        reviewList.innerHTML= `<p class="no-reviews">–û—Ç–∑—ã–≤–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</p>`;
        return;
      }
      let sum=0; let html="";
      arrayOfReviews.forEach(rv=>{
        sum+= rv.star;
        html+=`
          <div class="review-item">
            <div class="review-stars">${"‚òÖ".repeat(rv.star)}${"‚òÜ".repeat(5-rv.star)}</div>
            <div class="review-text">${rv.text}</div>
          </div>
        `;
      });
      let avg= (sum/arrayOfReviews.length).toFixed(1);
      reviewList.innerHTML= `<p>–°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞: ${avg}/5</p>`+html;
    }
    function toggleReviewForm(){
      let f= document.getElementById('reviewForm');
      f.style.display= (f.style.display==="none")?"block":"none";
    }
    const starRating= document.getElementById('starRating');
    starRating.querySelectorAll('.star').forEach(star=>{
      star.addEventListener('mouseover',()=>{
        highlightStars(+star.dataset.star);
      });
      star.addEventListener('click',()=>{
        starSelected= +star.dataset.star;
        highlightStars(starSelected);
      });
    });
    function highlightStars(count){
      starRating.querySelectorAll('.star').forEach(s=>{
        let val= +s.dataset.star;
        if(val<=count) s.classList.add('selected');
        else s.classList.remove('selected');
      });
    }
    async function submitReview(){
      if(starSelected<1){
        alert("–£–∫–∞–∂–∏—Ç–µ –æ—Ü–µ–Ω–∫—É (1‚Äì5)!");
        return;
      }
      let txt= document.getElementById('reviewText').value.trim();
      if(!txt){
        alert("–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π!");
        return;
      }
      let email= localStorage.getItem("tinkoff_email")||"anonymous@site.com";
      let r= await postReviewToServer(currentDetailsItemID, starSelected, txt, email);
      if(!r.success){
        alert("–û—à–∏–±–∫–∞ –æ—Ç–∑—ã–≤–∞: "+ (r.message||""));
        return;
      }
      alert("–û—Ç–∑—ã–≤ —Å–æ—Ö—Ä–∞–Ω—ë–Ω!");
      document.getElementById('reviewText').value="";
      starSelected=0;
      highlightStars(0);
      document.getElementById('reviewForm').style.display="none";
      let arr= await fetchReviewsFromServer(currentDetailsItemID);
      renderReviews(arr);
    }

    /*************************************************************
     * FadeIn + ScrollTop
     *************************************************************/
    const fadeEls= document.querySelectorAll('.fade-in-on-scroll');
    function checkFadeIn(){
      fadeEls.forEach(el=>{
        const rect= el.getBoundingClientRect();
        if(rect.top< window.innerHeight-100){
          el.classList.add('visible');
        }
      });
    }
    window.addEventListener('scroll', checkFadeIn);
    window.addEventListener('load', checkFadeIn);

    const scrollTopBtn= document.getElementById('scrollTopBtn');
    window.addEventListener('scroll',()=>{
      if(window.scrollY>300) scrollTopBtn.style.display="block";
      else scrollTopBtn.style.display="none";
    });
    scrollTopBtn.addEventListener('click',()=>{
      window.scrollTo({ top:0, behavior:"smooth" });
    });

    /*************************************************************
     * ON LOAD
     *************************************************************/
    window.addEventListener('load', ()=>{
      let pid= localStorage.getItem("tinkoff_paymentId");
      if(pid){
        console.log("–ù–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–π Tinkoff –ø–ª–∞—Ç–µ–∂:", pid);
      }
    });
  </script>
</body>
</html>
